From: AI Assistant (Claude)
Subject: Add expand/collapse button to ChatPanel component
Date: 2025-11-07

This patch adds an expand/collapse button to the ChatPanel header,
allowing users to toggle between normal and full-width chat views.
Imports Maximize2 and Minimize2 icons from lucide-react.

Applies to: upstream/app/frontend/src/components/source/ChatPanel.tsx

--- a/frontend/src/components/source/ChatPanel.tsx
+++ b/frontend/src/components/source/ChatPanel.tsx
@@ -7,7 +7,7 @@ import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
 import { Badge } from '@/components/ui/badge'
 import { Dialog, DialogContent, DialogTitle } from '@/components/ui/dialog'
-import { Bot, User, Send, Loader2, FileText, Lightbulb, StickyNote, Clock } from 'lucide-react'
+import { Bot, User, Send, Loader2, FileText, Lightbulb, StickyNote, Clock, Maximize2, Minimize2 } from 'lucide-react'
 import ReactMarkdown from 'react-markdown'
 import {
   SourceChatMessage,
@@ -51,6 +51,9 @@ interface ChatPanelProps {
   notebookContextStats?: NotebookContextStats
   // Notebook ID for saving notes
   notebookId?: string
+  // Expand/collapse functionality
+  isExpanded?: boolean
+  onToggleExpand?: () => void
 }
 
 export function ChatPanel({
@@ -69,7 +72,9 @@ export function ChatPanel({
   title = 'Chat with Source',
   contextType = 'source',
   notebookContextStats,
-  notebookId
+  notebookId,
+  isExpanded = false,
+  onToggleExpand
 }: ChatPanelProps) {
   const [input, setInput] = useState('')
   const [sessionManagerOpen, setSessionManagerOpen] = useState(false)
@@ -147,7 +152,28 @@ export function ChatPanel({
             <Bot className="h-5 w-5" />
             {title}
           </CardTitle>
-          {onSelectSession && onCreateSession && onDeleteSession && (
+          <div className="flex items-center gap-2">
+            {/* Expand/Collapse button */}
+            {onToggleExpand && (
+              <Button
+                variant="ghost"
+                size="sm"
+                onClick={onToggleExpand}
+                className="gap-2"
+                title={isExpanded ? "Collapse chat" : "Expand chat"}
+              >
+                {isExpanded ? (
+                  <>
+                    <Minimize2 className="h-4 w-4" />
+                    <span className="text-xs">Collapse</span>
+                  </>
+                ) : (
+                  <>
+                    <Maximize2 className="h-4 w-4" />
+                    <span className="text-xs">Expand</span>
+                  </>
+                )}
+              </Button>
+            )}
+            {/* Sessions button */}
+            {onSelectSession && onCreateSession && onDeleteSession && (
             <Dialog open={sessionManagerOpen} onOpenChange={setSessionManagerOpen}>
               <Button
                 variant="ghost"
@@ -175,6 +201,7 @@ export function ChatPanel({
               </DialogContent>
             </Dialog>
           )}
+          </div>
         </div>
       </CardHeader>
       <CardContent className="flex-1 flex flex-col min-h-0 p-0">
